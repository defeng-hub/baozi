(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-form-page1"],{"088f":function(t,e,n){var o=n("c86c"),a=n("2ec5b"),i=n("7ad3");e=o(!1);var r=a(i);e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* uni.scss */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */*[data-v-2c9f105f]{box-sizing:border-box}html[data-v-2c9f105f], body[data-v-2c9f105f]{overflow-y:scroll;height:100%}uni-page-body[data-v-2c9f105f]{background-image:url('+r+");background-size:cover}body.?%PAGE?%[data-v-2c9f105f]{background-image:url("+r+");background-size:cover}.popup[data-v-2c9f105f]{min-height:%?500?%;margin-top:%?20?%;padding:%?40?% %?32?%;width:94.7vw;background:#fff;border-radius:%?8?%}.popup .btn3[data-v-2c9f105f]{margin-top:%?50?%;margin-left:%?120?%;width:%?450?%;height:%?70?%;background:#0047ff;border-radius:%?40?%;color:#fff;text-align:center;line-height:%?70?%}.continer[data-v-2c9f105f]{z-index:1;width:100%}.continer .bottom[data-v-2c9f105f]{position:fixed;bottom:%?50?%;z-index:100}.continer .bottom .info[data-v-2c9f105f]{margin-top:%?20?%;font-weight:400;font-size:%?24?%;color:#888;line-height:%?34?%;text-align:center;font-style:normal}.continer .bottom .btns[data-v-2c9f105f]{padding:%?20?% %?70?%}.continer .bottom .btns .btn1[data-v-2c9f105f]{margin-top:%?30?%;width:%?600?%;height:%?92?%;background:#0047ff;border-radius:%?40?%;color:#fff;text-align:center;line-height:%?92?%}.continer .bottom .btns .btn2[data-v-2c9f105f]{margin-top:%?30?%;width:%?600?%;height:%?92?%;background:#0047ff;border-radius:%?40?%;color:#0047ff;text-align:center;line-height:%?92?%;background:#fff;border:%?2?% solid #0047ff}.continer .center[data-v-2c9f105f]{position:absolute;position:relative;display:flex;justify-content:center;align-items:center;flex-direction:column}.continer .center .logo[data-v-2c9f105f]{top:%?300?%;position:absolute;margin-top:%?160?%;width:%?500?%;height:%?500?%}.continer .title[data-v-2c9f105f]{position:absolute}.continer .title .title1[data-v-2c9f105f]{position:absolute;top:%?150?%;text-align:center;height:%?85?%;font-weight:700;font-size:%?56?%;color:#fff;line-height:%?85?%;letter-spacing:4px;font-style:normal;text-transform:none;width:100vw}.continer .title .title2[data-v-2c9f105f]{position:absolute;text-align:center;top:%?230?%;height:%?56?%;font-weight:700;font-size:%?40?%;color:#fff;line-height:%?56?%;letter-spacing:2px;font-style:normal;text-transform:none;width:100vw}",""]),t.exports=e},"1f30":function(t,e,n){"use strict";var o=n("4e0b"),a=n.n(o);a.a},"4e0b":function(t,e,n){var o=n("088f");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=n("967d").default;a("9e813648",o,!0,{sourceMap:!1,shadowMode:!1})},6395:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var o={uPopup:n("2c97").default,"u-Form":n("b55c").default,uFormItem:n("81a9a").default,"u-Input":n("b8d7").default,uButton:n("9f1f").default},a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{staticClass:"continer"},[o("v-uni-view",{staticClass:"title"},[o("v-uni-view",{staticClass:"title1"},[t._v(t._s(t.title1))]),o("v-uni-view",{staticClass:"title2"},[t._v(t._s(t.title2))])],1),o("v-uni-view",{staticClass:"center"},[o("v-uni-image",{staticClass:"logo",attrs:{src:n("f57d"),mode:""}})],1),o("v-uni-view",{staticClass:"bottom"},[o("v-uni-view",{staticClass:"btns"},[o("v-uni-view",{staticClass:"btn1",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.next.apply(void 0,arguments)}}},[t._v("施工备案提交")]),o("v-uni-view",{staticClass:"btn2",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.query.apply(void 0,arguments)}}},[t._v("施工备案查询")]),o("v-uni-view",{staticClass:"btn2",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.check.apply(void 0,arguments)}}},[t._v("施工台账查看及执法检查")]),o("v-uni-view",{staticClass:"info"},[t._v(t._s(t.end))])],1)],1),o("u-popup",{attrs:{show:t.show,closeable:!0,closeOnClickOverlay:!0},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}},[o("v-uni-view",{staticClass:"popup"},[o("u--form",{ref:"uForm",staticStyle:{width:"670rpx"},attrs:{labelPosition:"left",model:t.model1,rules:t.rules}},[o("u-form-item",{attrs:{labelWidth:200,label:"手机号：",prop:"phone",borderBottom:!0}},[o("u--input",{attrs:{maxlength:11,placeholder:"手机号必填",border:"none"},model:{value:t.model1.phone,callback:function(e){t.$set(t.model1,"phone",e)},expression:"model1.phone"}})],1),o("u-form-item",{attrs:{labelWidth:200,label:"验证码：",prop:"authcode",borderBottom:!0}},[o("u--input",{attrs:{placeholder:"请输入验证码",border:"none"},model:{value:t.model1.authcode,callback:function(e){t.$set(t.model1,"authcode",e)},expression:"model1.authcode"}}),o("template",{slot:"right"},[o("u-button",{staticStyle:{right:"20rpx"},attrs:{disabled:11!=t.model1.phone.length,type:"primary",plain:!0,size:"mini"}},[t._v("获取验证码")])],1)],2),o("v-uni-view",{staticClass:"btn3",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.queryBeian()}}},[t._v("查询备案记录")])],1)],1)],1),o("u-popup",{attrs:{show:t.show2,closeable:!0,closeOnClickOverlay:!0},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}},[o("v-uni-view",{staticClass:"popup"},[o("u--form",{ref:"uForm2",staticStyle:{width:"670rpx"},attrs:{labelPosition:"left",model:t.model2,rules:t.rules2}},[o("u-form-item",{attrs:{labelWidth:200,label:"账号：",prop:"username",borderBottom:!0}},[o("u--input",{attrs:{maxlength:11,placeholder:"手机号必填",border:"none"},model:{value:t.model2.username,callback:function(e){t.$set(t.model2,"username",e)},expression:"model2.username"}})],1),o("u-form-item",{attrs:{labelWidth:200,label:"密码：",prop:"passwd",borderBottom:!0}},[o("u--input",{attrs:{placeholder:"请输入密码",border:"none"},model:{value:t.model2.passwd,callback:function(e){t.$set(t.model2,"passwd",e)},expression:"model2.passwd"}})],1),o("v-uni-view",{staticClass:"btn3",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.login()}}},[t._v("登陆")])],1)],1)],1)],1)},i=[]},"86d3":function(t,e,n){"use strict";n.r(e);var o=n("d97b"),a=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},d97b:function(t,e,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n("2634")),i=o(n("2fdc")),r=n("7676"),s={data:function(){return{model1:{phone:"",authcode:""},model2:{username:"",passwd:""},rules:{phone:{type:"string",required:!0,max:11,min:11,message:"手机号不符合要求",trigger:["blur","change"]}},rules2:{username:{type:"string",required:!0,message:"手机号不符合要求",trigger:["blur","change"]},passwd:{type:"string",required:!0,message:"密码不符合要求",trigger:["blur","change"]}},title1:"",title2:"",end:"",show:!1,show2:!1}},created:function(){var t=this;return(0,i.default)((0,a.default)().mark((function e(){var n,o,i;return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(r.getKey+"title1",{});case 2:return n=e.sent,t.title1=n.data.value,e.next=6,t.$http.get(r.getKey+"title2",{});case 6:return o=e.sent,t.title2=o.data.value,e.next=10,t.$http.get(r.getKey+"end",{});case 10:i=e.sent,t.end=i.data.value;case 12:case"end":return e.stop()}}),e)})))()},methods:{next:function(){console.log("next"),uni.navigateTo({url:"/pages/form/page2"})},query:function(){this.show=!0},check:function(){var t=this;return(0,i.default)((0,a.default)().mark((function e(){var n;return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=uni.getStorageSync("Mt8p3QiZ"),n?(t.model2.username=null===n||void 0===n?void 0:n.username,t.model2.passwd=null===n||void 0===n?void 0:n.passwd,t.$http.post(r.loginApi,t.model2,{}).then((function(e){if(200==e.code)return 0==e.data.status?(uni.showToast({icon:"none",title:e.data.msg}),uni.removeStorageSync("Mt8p3QiZ"),void(t.show2=!0)):(uni.setStorageSync("Mt8p3QiZ",e.data.user),void uni.navigateTo({url:"/pages/admin/check2"}));t.show2=!0}))):t.show2=!0;case 2:case"end":return e.stop()}}),e)})))()},login:function(){var t=this;return(0,i.default)((0,a.default)().mark((function e(){return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t.$refs.uForm2),t.$refs.uForm2.validate().then(function(){var e=(0,i.default)((0,a.default)().mark((function e(n){return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t.model2),t.$http.post(r.loginApi,t.model2,{}).then((function(t){if(200!=t.code)uni.showToast({icon:"none",title:"登录失败"}),uni.removeStorageSync("Mt8p3QiZ");else{if(0==t.data.status)return void uni.showToast({icon:"none",title:t.data.msg});uni.setStorageSync("Mt8p3QiZ",t.data.user),uni.navigateTo({url:"/pages/admin/check2"})}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){}));case 2:case"end":return e.stop()}}),e)})))()},queryBeian:function(){var t=this;return(0,i.default)((0,a.default)().mark((function e(){return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$refs.uForm.validate().then(function(){var e=(0,i.default)((0,a.default)().mark((function e(n){var o,i,s,l,u,c;return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.model1),e.next=3,t.$http.get(r.getTableByPhone+t.model1.phone,{});case 3:o=e.sent,console.log(o),200==o.code&&("查看对象不存在或无权查看"==o.msg?uni.showToast({title:"未查询到任何备案",icon:"none"}):"审核未通过"==(null===(i=o.data)||void 0===i?void 0:i.status)?uni.navigateTo({url:"/pages/form/index?HJnq8c="+(null===(u=o.data)||void 0===u?void 0:u.id)}):""==(null===(s=o.data)||void 0===s?void 0:s.status)?uni.navigateTo({url:"/pages/form/index?HJnq8c="+(null===(c=o.data)||void 0===c?void 0:c.id)}):"审核通过"==(null===(l=o.data)||void 0===l?void 0:l.status)&&(uni.showToast({icon:"none",title:"备案通过"}),t.show=!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){uni.$u.toast("资料填写不完整")}));case 1:case"end":return e.stop()}}),e)})))()},close:function(){this.show=!1,this.show2=!1}}};e.default=s},f57d:function(t,e,n){t.exports=n.p+"static/page1/logo5.png"},f864:function(t,e,n){"use strict";n.r(e);var o=n("6395"),a=n("86d3");for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("1f30");var r=n("828b"),s=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"2c9f105f",null,!1,o["a"],void 0);e["default"]=s.exports}}]);